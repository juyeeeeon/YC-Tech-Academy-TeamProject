<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">

<body>
<link rel="stylesheet" href="/css/styles2.css">
<div class="contain">
<div class="container">
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <div class="container px-4 px-lg-5">
            <a class="navbar-brand" href="/schedules">Main</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav me-auto mb-2 mb-lg-0 ms-lg-4">
                    <li class="nav-item"><a class="nav-link active" aria-current="page" href="/recommendation">RECOMMENDATION</a></li>
                    <li class="nav-item"><a class="nav-link" href="/schedules">About?</a></li>
                </ul>
                <form class="d-flex">
                    <button class="btn btn-outline-dark" type="submit">
                        <a class="nav-link" href="/logout">
                        LOG OUT
                        </a>
                    </button>
                </form>
            </div>
        </div>
    </nav>

    <head>
        <meta charset="utf-8">
        <title>Google Map</title>
    </head>

    <body>
    <div id="map" style="width:100%; height: 50vh;"></div>


    <script>
    function initMap() {
      const map = new google.maps.Map(document.getElementById("map"), {
        center: { lat: 37.5400456, lng: 126.9921017 },
        zoom: 10
      });

      const malls = [
        { label: "A", name: "코엑스몰", lat: 37.5115557, lng: 127.0595261 },
        { label: "B", name: "광장시장", lat: 37.5700398, lng: 126.9996036 },
        { label: "C", name: "롯데월드타워몰", lat: 37.5125585, lng: 127.1025353 },
      ];

      const bounds = new google.maps.LatLngBounds();
      const infoWindow = new google.maps.InfoWindow();

      malls.forEach(({ label, name, lat, lng }) => {
        const marker = new google.maps.Marker({
          position: { lat, lng },
          label,
          map
        });
        bounds.extend(marker.position);

        marker.addListener("click", () => {
          map.panTo(marker.position);
          infoWindow.setContent(name);
          infoWindow.open({
            anchor: marker,
            map
          });
        });
      });

      map.fitBounds(bounds);
    };
    </script>
    <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB8YJRw_pqqsVcrN5Fld0anTykAdZ4F8zI&callback=initMap&region=kr"></script>
    </body>

    <div>
        <a href="#" th:href="@{/schedules/new}"
           class="btn btn-info btn-block border border-white"  style="width: 100%;" role="button">등록</a>
    </div>

    <form th:action="@{/schedules}" method="get">
        <input type="text" placeholder="여행지명을 통해 일정을 검색하세요." style="width: 95%;" name="searchKeyword">
        <button class="btn btn-secondary border border-white" type="submit">검색</button>
    </form>

    <div>
        <table class="table table-striped">

            <thead class="table-secondary">
            <tr>
<!--                <th>#</th>-->
                <th>여행날짜</th>
                <th>여행지명</th>
                <th>설명</th>
                <th>방문상태</th>
                <th>작성날짜</th>
                <th></th>
            </tr>
            </thead>

            <tbody class="table-light">

            <tr th:each="schedule : ${schedules}">
<!--                <td th:text="${schedule.id}"></td>-->
                <td th:text="${schedule.travelDate}"></td>
                <td th:text="${schedule.destination}"></td>
                <td th:text="${schedule.comment}"></td>
                <td th:text="${schedule.visitStatus}"></td>
                <td th:text="${schedule.updatedAt}"></td>
                <td>
                    <a href="#" th:href="@{/schedules/{id}/edit (id=${schedule.id})}"
                       class="btn btn-info border border-white" role="button">수정</a>
                </td>
            </tr>

            </tbody>

        </table>

        <th:block th:each= "page : ${#numbers.sequence(startPage, endPage)}">
            <!--검색기능-4-->
            <a class="btn btn-lg btn-secondary" th:if="${page != nowPage}"
               th:href="@{/schedules(page = ${page -1}, searchKeyword = ${param.searchKeyword})}"
               th:text="${page}">
            </a>

            <strong class="btn btn-sm btn-secondary" th:if="${page == nowPage}" th:text="${page}" style="color : #ffffff;"></strong>
        </th:block>
    </div>

    <div th:replace="fragments/footer :: footer"/>
</div>
</div> <!-- /container -->
</body>
</html>