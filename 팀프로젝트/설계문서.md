# 설계 문서

## 1. Introduction

### 1.1 목적(Purpose)

본 문서의 목적은 여행 일정 계획 서비스의 서버와 데이터베이스에 대한 아키텍처 설계를 제공하는 것이다. 사용자의 입력 및 여행 일정 데이터를 수집, 관리 및 처리하기 위한 요구 사항과 여행 일정을 제공하기 위한 클라이언트 프로그램의 요구 사항도 개략적으로 설명한다.

본 문서는 여행 일정 계획 서비스를 설계, 구현 및 관리하기 위한 기술 가이드 역할을 한다. 주요 구성 요소, 그 상호 작용 및 시스템 내의 데이터 흐름을 강조하는 아키텍처에 대한 자세한 개요를 제공한다. 또한 여행 일정 계획 서비스의 개발 및 유지관리에 관여하는 개발자, 이해관계자 및 시스템 관리자를 위한 참조 자료로 사용될 수 있다.

### 1.2 범위(Scope)

본 문서의 범위는 여행 일정 계획 서비스의 서버와 데이터베이스의 기능 요구사항(Functional Requirements), 비기능 요구사항(Non-Functional Requirements) 및 데이터 설계(Data Design)로 한정한다.

### 1.3. 용어 및 정의(Terminologies and Definitions)

- Spring : 스프링(Spring)은 자바 기반의 경량 프레임워크로, 엔터프라이즈급 애플리케이션을 개발하기 위한 다양한 기능을 제공한다. IoC(Inversion of Control) 컨테이너, 의존성 주입, AOP(Aspect-Oriented Programming), MVC 웹 프레임워크 등을 포함하며, 느슨한 결합, 테스트 용이성, 모듈성 등의 특징을 제공하여 유연하고 확장 가능한 개발을 지원한다.

- Spring Boot : 스프링 부트(Spring Boot)는 스프링 기반 애플리케이션을 빠르게 개발하고 실행하기 위한 도구로, 간소화된 설정, 톰캣 등의 내장 서버, 스타터 패키지, 자동 설정 등을 제공하여 개발자에게 생산성과 편의성을 제공한다.

- Amazon Web Services(AWS) :  아마존 닷컴이 제공하는 클라우드 컴퓨팅 플랫폼으로, 다양한 IT 인프라 서비스를 온라인으로 제공한다. 이 서비스들은 개발자와 기업들이 손쉽게 확장 가능하고 안정적인 인프라를 구축하고 운영할 수 있도록 도와준다. AWS는 컴퓨팅 파워, 데이터베이스 스토리지, 컨텐츠 전송, 머신러닝, 보안 등 다양한 서비스를 포함하고 있다. 개발자들은 필요에 따라 이러한 서비스를 사용하여 애플리케이션을 더 효율적으로 구축하고 관리할 수 있다. 

- Thymeleaf : Thymeleaf는 자바 웹 애플리케이션에서 사용되는 서버 사이드 템플릿 엔진으로, 스프링과 통합되어 주로 HTML 및 XML 문서를 처리하여 동적 웹 페이지를 생성한다. 간편한 템플릿 문법을 사용하여 데이터 전달과 표현을 용이하게 할 수 있으며, 스프링 부트와 함께 많이 활용된다.

- Bootstrap : Bootstrap은 HTML, CSS, JavaScript를 이용하여 웹 페이지를 빠르고 쉽게 디자인할 수 있는 오픈 소스 프론트엔드 프레임워크이다. 특히, 반응형 웹 디자인을 쉽게 구현할 수 있고, 모바일 기기와의 호환성도 갖추고 있다. 사전에 정의된 디자인 컴포넌트와 스타일링을 제공하여 개발자들이 일관된 UI를 구축할 수 있도록 도와준다. 

- MySQL : 오픈 소스 관계형 데이터베이스 관리 시스템(RDBMS)으로, 고성능, 안정성, 확장성, 사용 편의성 등 다양한 장점을 가지고 있어 데이터베이스 구축 및 관리에 널리 사용된다.

- API : Application Programming Interface의 약자이다. 일종의 소프트웨어 인터페이스이며 컴퓨터나 소프트웨어 간 연결을 가능하게 한다.

- 클라이언트 : 서버와 통신할 대상이며, 서버에게 여행 일정과 관련된 각종 요청을 한다.

---

## 2. Architectural Drivers

### 2.1 유스케이스 다이어그램(Usecase Diagram)

![usecase](https://github.com/juyeeeeon/YC-Tech-Academy-TeamProject/blob/live/img/usecase.drawio.png?raw=true)

### 2.2. 기능 요구사항(Functional Requirements)

| ID | Function | Description |
| :-: | :-: | --- |
| FR01 | 회원가입 | 1. 클라이언트에서 이메일, 비밀번호를 입력하여 서버에 사용자 등록을 요청한다. <br /> 2. 비밀번호를 암호화한 후 사용자 정보를 데이터베이스에 저장한다. <br /> 3-1. 만약 이미 데이터베이스에 저장되어 있는 이메일이라면 사용자 정보를 저장하지 않고 잘못된 요청임을 클라이언트에 회신한다. <br /> 3-2. 데이터베이스에 성공적으로 저장되면 성공했음을 클라이언트에 회신한다. <br /> 4. 만약 클라이언트가 성공적으로 사용자 정보를 저장했다고 회신 받으면 입력했던 이메일, 비밀번호로 서버에 로그인을 요청한다. |
| FR02 | Form 로그인 | 1. 클라이언트에서 이메일, 비밀번호를 입력하여 서버에 로그인을 요청한다. <br /> 2. 데이터베이스에 이메일이 존재하는지 조회한다. <br /> 3-1. 존재하지 않는다면 잘못된 요청임을 클라이언트에 회신한다. <br /> 3-2. 존재한다면 비밀번호가 같은지 확인한다. <br /> 4-1. 비밀번호가 다르다면 잘못된 요청임을 클라이언트에 회신한다. <br /> 4-2. 비밀번호가 같다면 사용자 정보와 사용자 유효성 확인을 위한 토큰 값을 회신한다. |
| FR03 | 구글 로그인 | 1. 관리자는 Google Developer Console에서 애플리케이션을 등록하고, OAuth 2.0 클라이언트 ID 및 API 키를 발급받는다. <br> 2. 사용자가 애플리케이션에서 "구글 계정으로 로그인" 버튼을 클릭하면, 클라이언트는 Google OAuth 2.0 서버에 인증 요청을 보낸다. <br> - 요청에는 클라이언트 ID, 리다이렉션 URI, 스코프(접근 권한 범위) 등이 포함된다. <br> - Google은 사용자에게 로그인 화면을 제공하고, 사용자가 로그인하면 인증 코드(Authorization Code)를 발급한다. <br> 3. 클라이언트는 받은 인증 코드를 사용하여 Google OAuth 2.0 서버에 액세스 토큰 요청을 한다. <br> - 이 때, 클라이언트 시크릿과 함께 클라이언트 ID, 리다이렉션 URI, 인증 코드를 보낸다. <br> 4. Google은 이 정보를 검증하고 유효하면 액세스 토큰과 리프레시 토큰을 클라이언트에게 응답한다. <br> 5. 클라이언트는 받은 액세스 토큰을 사용하여 Google API에 사용자 정보를 요청한다. <br> 6. Google은 액세스 토큰을 검증하고 사용자 정보를 응답한다. <br> 7. 클라이언트는 JWT를 사용하여 토큰을 발급하고 이를 서버로 전송한다. <br> 8. 서버에서는 JWT의 서명을 검증하고 클라이언트에게 신뢰할 수 있는 사용자 정보를 전달한다.|
| FR04 | 사용자 정보 제공 | 1. 클라이언트에 저장되어 있는 토큰 값으로 서버에 사용자 정보를 요청한다. <br /> 2. 유효한 토큰 값이면 토큰에서 사용자 ID를 얻는다. 3. 데이터베이스에서 사용자 ID로 정보를 조회한다. 4-1. 존재하지 않는 ID라면 잘못된 요청임을 클라이언트에 회신한다. 4-2. 존재한다면 사용자 정보를 클라이언트에 회신한다. |
| FR05 | 로그아웃 | 1. 클라이언트에 저장되어 있는 토큰 값으로 서버에 로그아웃을 요청한다. <br /> 2. 유효한 토큰 값이면 클라이언트에 유효한 요청임을 회신한다. |
| FR06 | 여행 일정 등록 | 1. 클라이언트가 여행날짜, 여행지명, 설명, 방문상태, 위치 정보를 입력한다. <br> 2. 클라이언트는 데이터베이스에 입력한 정보 등록을 요청한다. <br> 3-1. 데이터베이스는 여행날짜, 여행지명, 방문상태 중 하나라도 입력을 받지 않으면 등록을 하지 않는다. <br> 3-2. 여행날짜, 여행지명, 방문상태 모두 입력되면 여행일정이 데이터베이스에 등록된다.|  
| FR07 | 여행 일정 수정 | 1. 클라이언트는 기존에 등록된 여행 일정을 데이터베이스에 수정을 요청한다. <br> 2. 데이터베이스는 수정할 여행일정을 조회한다. <br> 3. 클라이언트는 여행일정을 수정하고, 데이터베이스에 여행일정 업데이트를 요청한다. <br> 4-1. 데이터베이스는 여행날짜, 여행지명, 방문상태 중 하나라도 입력을 받지 않으면 업데이트를 하지 않는다. <br> 4-2. 여행날짜, 여행지명, 방문상태 모두 입력되면 여행일정이 데이터베이스에 업데이트 된다.|  
| FR08 | 여행 일정 조회 | 1. 클라이언트는 여행일정을 데이터베이스에  조회 요청한다. <br> 2-1. 데이터베이스에 해당 여행일정이 존재하지 않는다면, 여행일정이 조회되지 않는다. <br> 2-2. 데이터베이스에 해당 여행일정이 존재하면, 여행일정이 데이터베이스에서 조회된다. <br> 3. 여행일정은 여행날짜가 빠른순으로 정렬되어 조회된다.|
| FR09 | 여행 일정 검색 | 1. 클라이언트가 검색할 여행지명을 입력한다. <br> 2. 데이터베이스에서 클라이언트가 입력한 값을 포함한 여행지명을 조회한다. |   
| FR10 | 여행 일정 삭제 | 1. 클라이언트가 특정 여행일정의 삭제를 서버에 요청한다. <br> 2. 클라이언트가 요청한 여행일정이 데이터베이스에서 삭제된다. |   


### 2.3 비기능 요구사항(Non-Functional Requirements)

#### 2.3.1. 품질 요구사항(Quality Attribute)

| ID | Category | Description |
| :-: | :-: | --- |
| QA01-1 | 성능 | 서버는 동시에 다수의 클라이언트의 데이터 요청을 처리해야 한다. |
| QA01-2 | 성능 | 사용자에 따른 개개인의 여행 일정이 작성되어야 한다. |
| QA02 | 사용성 | 여행 일정 기록을 저장하여 개인화하여야 한다. |
| QA03 | 사용성 | 사용자에게 추천 여행지를 제공해야 한다. |
| QA04 | 사용성 | 사용자에게 해당 서비스에 대한 정보를 전달해야 한다. |
| QA05 | 보안 | 사용자 인증을 통해 사용자의 정보를 보호해야 한다. |




#### 2.3.2. 제약 사항(Constraint Requirement)

| ID | Description |
| :-: | --- |
| CR01 | 본 프로젝트의 완성 기한은 2023.12.02이다. |

---

## 3. Architecture Overview

![image](https://github.com/juyeeeeon/YC-Tech-Academy-TeamProject/blob/live/img/tech_stack.jpg?raw=true)


### 3.1 Frontend Architecture

- 유저 인터페이스 
  - 화면, 페이지, 양식 및 여행 일정 표시를 포함하여 사용자 인터페이스 요소를 렌더링한다.
  - 사용자가 플랫폼을 탐색하고 상호 작용할 수 있도록 직관적이고 시각적으로 매력적인 디자인을 제공한다.
  - Bootstrap과 thymeleaf 템플릿을 이용한다.

- 사용자 입력 처리
  - UI 구성 요소에서 사용자 입력을 받는다.
  - 백엔드로 요청을 보내기 전에 사용자 입력의 유효성을 검사하고 처리한다.

- 사용자 인증 및 권한 부여
  - 사용자 등록 및 로그인 프로세스를 관리한다.
  - 사용자 등록과 인증 및 권한 부여를 위해 백엔드와 통신한다.
  - 사용자 권한 정보를 저장한다.

- 여행 일정 표시
  - 여행 일정 목록과 여행 일정 항목에 대한 세부 정보를 표시한다.
  - 여행 일정의 등록, 수정, 삭제 등의 사용자 상호 작용을 제공한다. 

- 구글맵 표시
  - 메인 화면에 여행지에 대한 정보를 쉽게 찾을 수 있도록 구글맵을 제공한다.

- 추천 여행지 표시
  - 추천 여행지에 대한 사진과 설명 등의 정보를 표시한다.
  - 추천 여행지의 공식 홈페이지에 쉽게 접속할 수 있도록 한다.

- 해당 서비스 관련 정보 표시
  - 서비스 이용자들이 해당 서비스에 대한 정보를 쉽게 얻을 수 있도록 서비스의 목적과 설명 등을 제공한다.

### 3.2 Backend Architecture

- API 요청 처리
  - 프론트엔드와의 통신을 위해 RESTful API를 정의한다.
  - 프론트엔드에서 들어오는 요청을 처리하고 결과를 회신한다.

- 사용자 관리
  - 사용자 등록, 인증 및 권한 부여를 관리한다.
  - 사용자의 정보를 저장하고 암호화 및 유효성 검사를 처리한다.
  - 보안 통신을 인증 토큰을 관리한다.

- 여행 일정 관리
  - 여행날짜, 여행지명, 설명, 방문상태, 위치정보 등의 여행 일정 데이터를 저장하고 관리한다.
  - 여행 일정 검색 및 세부 정보에 대한 API를 제공한다.
  - 여행 일정은 여행날짜가 빠른 순으로 조회된다.
  - 여행지명을 기준으로 검색이 가능하다.

- 데이터베이스 관리
  - 사용자, 여행 일정과 관련된 데이터를 저장하고 관리한다.
  - 시스템의 기능을 지원하는 효율적인 데이터 저장 및 검색 메커니즘을 제공한다.
  - 많은 수의 사용자 및 여행 일정 항목을 처리할 수 있도록 데이터 무결성, 보안 및 확장성을 보장한다.

---

## 4. Data Design

![Data model](https://github.com/juyeeeeon/YC-Tech-Academy-TeamProject/blob/live/img/database_design.drawio.png?raw=true)

### Member Table
- 이 테이블에는 사용자 ID, 이름, 이메일, 암호화된 암호 등 정보를 저장한다.
- Columns
  - id
  - username
  - email
  - address
  - schedules
  - password
  - createdAt
  - updatedAt
  - roles

### Schedule Table
- 이 테이블에는 여행일정 id, member, 여행날짜, 여행지명 등 정보를 저장한다.
- Columns
  - id
  - member
  - travelDate
  - destination
  - comment
  - visitStatus
  - createdAt
  - updatedAt
  - locations






